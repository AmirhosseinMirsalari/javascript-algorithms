# چالش: اعتبارسنجی ایمیل

## دستورالعمل‌ها

یک تابع به نام `validateEmail` بنویسید که یک رشته را دریافت کرده و برگرداند آیا رشته یک آدرس ایمیل معتبر است یا خیر. برای اهداف این چالش، یک آدرس ایمیل معتبر به عنوان یک رشته تعریف می‌شود که شامل نماد `@` و نماد `.` باشد.

### مثال‌ها

```js
validateEmail('john@gmail.com'); // true
validateEmail('john@gmail'); // false
```

### راهنماها

- اگر از عبارات منظم آگاه باشید، اینجا مکان خوبی برای استفاده از آنها است. من دو راه‌حل برای شما ارائه می‌دهم. یکی از عبارات منظم استفاده می‌کند و دیگری نه.

## راه‌حل‌ها

<details>
  <summary>برای دیدن راه‌حل 1 کلیک کنید </summary>

استفاده از یک عبارت منظم:

```js
function validateEmail(email) {
  const emailRegex = /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/;
  return emailRegex.test(email);
}
```

### توضیح

عبارت منظم کمی پیچیده است، اما یک مثال خوب از قدرت عبارات منظم است. بیایید آن را تجزیه کنیم:

- ^ ابتدای رشته را ادعا می‌کند.
- [A-Za-z0-9._%+-]+ یک یا چند تکرار از حروف (به هر دو حالت بزرگ و کوچک)، ارقام، نقطه‌ها، زیرخط‌ها، علامت درصد، علامت‌های پلاس و خط‌تیره را مطابقت می‌دهد. این قسمت بخش محلی از آدرس ایمیل را قبل از نماد "@" نشان می‌دهد.
- @ نماد "@" را مطابقت می‌دهد.
- [A-Za-z0-9.-]+ یک یا چند تکرار از حروف، ارقام، نقطه‌ها و خط‌تیره‌ها را مطابقت می‌دهد. این قسمت نام دامنه‌ی آدرس ایمیل را نشان می‌دهد.
- \. نقطه (".") را مطابقت می‌دهد. به دلیل اینکه نقطه در عبارات منظم معانی ویژه‌ای دارد، باید با یک علامت برگشت (\) دور آن را ارجاع دهیم.
- [A-Za-z]{

2,} دو یا چند تکرار از حروف را مطابقت می‌دهد. این بخش دامنه‌ی بالایی (TLD) آدرس ایمیل را نشان می‌دهد.
- $ انتهای رشته را ادعا می‌کند.

</details>

<details>
  <summary>برای دیدن راه‌حل 2 کلیک کنید </summary>

بدون استفاده از عبارات منظم:

```js
function validateEmail(email) {
  if (email.indexOf('@') === -1) {
    return false;
  }

  const [localPart, domain] = email.split('@');

  if (localPart.length === 0 || domain.length < 3) {
    return false;
  }

  const domainExtension = domain.split('.');
  if (
    domainExtension.length < 2 ||
    domainExtension[domainExtension.length - 1].length < 2
  ) {
    return false;
  }

  return true;
}
```

### توضیح

این راه‌حل کمی پیچیده‌تر است، اما از عبارات منظم استفاده نمی‌کند.

- با استفاده از متد `indexOf` بررسی می‌کنیم که آدرس ایمیل شامل نماد "@" است یا خیر. اگر شامل نباشد، `false` برگردانده می‌شود.
- با استفاده از متد `split`، آدرس ایمیل را به دو قسمت تقسیم می‌کنیم: بخش محلی و دامنه. ما از استخراج ویژگی‌ها استفاده می‌کنیم تا دو بخش را به متغیرها اختصاص دهیم.
- بررسی می‌کنیم که بخش محلی خالی است یا دامنه کمتر از سه کاراکتر دارد. اگر یکی از این شرایط درست باشد، `false` برگردانده می‌شود.
- با استفاده از متد `split`، دامنه را به بخش‌ها تقسیم می‌کنیم. بررسی می‌کنیم که دامنه حداقل دو بخش داشته باشد و بخش آخر حداقل دو کاراکتر داشته باشد.
- اگر هیچ یک از شرایط فوق درست نباشند، `false` برگردانده می‌شود.

در نهایت، اگر هیچ یک از شرایط درست نباشند، `true` برگردانده می‌شود.

</details>

### موارد آزمون

```js
test('آدرس‌های ایمیل معتبر', () => {
  expect(validateEmail('john@example.com')).toBe(true);
  expect(validateEmail('jane.doe@domain.org')).toBe(true);
});

test('آدرس‌های ایمیل نامعتبر', () => {
  expect(validateEmail('invalid-email')).toBe(false);
  expect(validateEmail('@domain.com')).toBe(false);
  expect(validateEmail('user@domain')).toBe(false);
});
```